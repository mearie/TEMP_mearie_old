<h1>앙골모아 <!--(-->설명서<!--)--></h1>
<p>앙골모아는 <a href="/">강 성훈</a>이 2005년 2월부터 8월까지에 걸쳐서 만든 자그마한 BMS 플레이어입니다.</p>

<h2>설치</h2>
<p>앙골모아를 사용하기 위해서는 다음과 같은 환경 및 라이브러리가 필요합니다.</p>
<ul>
	<li>컴파일러: <a href="http://msdn.microsoft.com/visualc/">마이크로소프트 Visual C++</a> 6.0 이상, 또는 <a href="http://gcc.gnu.org/">g++</a> 3.3 이상</li>
	<li>라이브러리: <a href="http://libsdl.org/">SDL</a> 1.2 이상, <a href="http://www.libsdl.org/projects/SDL_image/">SDL_image</a> 1.2 이상, <a href="http://www.libsdl.org/projects/SDL_mixer/">SDL_mixer</a> 1.2 이상, <a href="http://icculus.org/smpeg/">smpeg</a> 0.4.0 이상, (윈도, g++에서만) <a href="http://mingw.org/">MinGW</a></li>
</ul>
<p>참고로 SDL_image는 libpng, zlib, libjpeg, 그리고 (설정에 따라) libtiff를 필요로 합니다. SDL_mixer에 libogg 지원을 넣어 컴파일하면 ogg 파일도 키음으로 사용할 수 있습니다.</p>
<p>대다수의 경우 SDL 및 관련 라이브러리들은 SDL/ 디렉토리에 헤더를 설치하는 경우가 보통입니다. 앙골모아는 그냥 <code>#include &lt;SDL.h&gt;</code>와 같이 <em>별도의 디렉토리를 가정하지 않기 때문</em>에, 헤더 경로를 설정할 때 주의가 필요합니다.</p>

<h3>마이크로소프트 윈도</h3>
<p>Visual C++를 사용할 경우 위의 라이브러리 링크에서 해당하는 -devel- 파일들을 받아서 설치해야 합니다. 일단 설치가 끝난 뒤에는 프로젝트 설정에서 헤더 경로와 라이브러리 경로를 적절히 설정해 둔 뒤, 링크할 라이브러리 설정에서 다음을 추가하고 컴파일하면 됩니다.</p>
<pre>SDL.lib SDLmain.lib SDL_image.lib SDL_mixer.lib smpeg.lib</pre>
<p>g++를 사용할 경우 비슷한 방법으로 라이브러리를 설치하고 다음 명령을 실행하여 컴파일합니다. 이 경우에도 헤더 경로는 -I 옵션으로 적절히 설정할 필요가 있습니다.</p>
<pre>$ g++ -s -Os -lmingw32 -lSDLmain -lsmpeg -lSDL -lSDL_mixer -lSDL_image -lcomdlg32
angolmois.c -o angolmois.exe</pre>

<h3>유닉스 계열</h3>
<p>SDL 및 기타 라이브러리들을 설치하고 (많은 경우 배포판의 패키지 설치 명령으로 쉽게 설치할 수 있습니다) 다음 명령을 실행하여 컴파일합니다. 이 역시 헤더 경로를 적절히 설정해야 합니다.</p>
<pre>$ g++ -s -Os -lsmpeg -lSDL -lSDL_mixer -lSDL_image angolmois.c -o angolmois</pre>

<h3>맥 오에스 텐</h3>
<p>직접 해 보지는 않았습니다만, 대략 다음과 같은 방법이 가능합니다.</p>
<ul>
	<li>SDL 및 기타 라이브러리를 설치하고 유닉스 계열과 유사하게 콘솔에서 컴파일합니다. 이 방법의 경우 각 라이브러리들의 헤더 경로를 직접 <code>/Library/Frameworks/SDL.framework/Headers/</code>와 같이 지정해야 합니다.</li>
	<li>Xcode를 사용하여 Angolmois.app 애플리케이션으로 만들 수 있습니다.</li>
</ul>
<p>어느 쪽이든 SDL 배포본에 포함되는 sdlmain.m 파일을 함께 컴파일해야 합니다. 또한 smpeg의 맥 오에스 텐 용 배포판이 아직 준비되어 있지 않다는 점을 유의하시길 바랍니다.</p>

<h3>컴파일 이후</h3>
<p>컴파일이 끝난 후에는 실행 파일을 적절한 곳에 복사하고 윈도의 경우 dll 파일들을 같은 디렉토리에 복사해 넣습니다.</p>

<h2>실행</h2>
<p>앙골모아는 일반적으로 콘솔에서 실행하며, 다음과 같은 명령줄 인자들을 받습니다.</p>
<pre>&gt; angolmois [&lt;파일 이름&gt; [&lt;초기 배속&gt; [&lt;옵션들&gt; [&lt;키 번호&gt; &hellip;]]]]</pre>
<p>파일 이름은 재생할 BMS 파일의 경로입니다. 만약 이 이름이 생략되거나 <code>""</code>와 같이 빈 문자열로 주어지면, 윈도에서는 파일 열기 대화 상자를 띄워서 어떤 파일을 재생할 지 선택하게 합니다.</p>
<p>초기 배속은 처음에 몇 배속으로 재생될 것인지를 나타냅니다. 0.1배속부터 99배속까지가 지원됩니다.</p>
<p>옵션들은 글자 단위로 해석되며, 다음과 같은 글자를 사용할 수 있습니다.</p>
<ul>
	<li><code>v</code> (view): 플레이어가 아니라 뷰어로 동작합니다. 즉 사용자 입력을 받아 들이지 않습니다.</li>
	<li><code>i</code> (info): 첫 화면에서 BMS 정보를 보여 주지 않도록 합니다.</li>
	<li><code>w</code> (windowed): 전체 화면 모드가 아닌 창 모드로 동작하도록 합니다.</li>
	<li><code>m</code> (mirror): 키 배치를 반전합니다. 즉 5키의 경우 1키와 5키, 2키와 4키가 서로 맞바뀌어 나타납니다.</li>
	<li><code>r</code>과 <code>R</code> (random): 키 배치를 섞습니다. 여전히 같은 키에 배당된 노트들은 같은 키에 나타납니다. 대문자일 경우 스크래치와 페달도 함께 섞습니다.</li>
	<li><code>s</code>와 <code>S</code> (shuffle): 노트들을 전체적으로 섞습니다. 원래 같은 키에 배당된 노트도 다른 키로 배당될 수 있습니다. 대문자일 경우 스크래치와 페달도 함께 섞습니다.</li>
	<li><code>0</code>, <code>1</code>, <code>2</code>: <code>#LNTYPE</code> 명령이 없는 BMS의 경우 지정한 값을 쓰도록 합니다. (일부 옛 BMS들은 <code>#LNTYPE 2</code> 명령이 생략된 채로 나타나는 경우가 있습니다. 이런 경우를 위한 것입니다.)</li>
</ul>
<p>키 번호는 해당 키 입력을 받을 때 어떤 키보드 글쇠를 사용할 지 정합니다. 기본값은 1P <code>zsxdcfv</code>, 2P <code>mk,l.;/</code>이며, 스크래치는 양쪽 쉬프트, 페달은 양쪽 알트를 사용합니다. 키 번호는 <a href="http://svn.libsdl.org/trunk/SDL/include/SDL_keysym.h">SDLK_*</a> 매크로의 번호를 따르며 다음과 같은 순서대로 입력합니다.</p>
<pre>&lt;1키&gt; &lt;2키&gt; &lt;3키&gt; &lt;4키&gt; &lt;5키&gt; &lt;스크래치&gt; &lt;페달&gt; &lt;6키&gt; &lt;7키&gt;</pre>
<p>2P는 1P 다음에 이어서 입력하면 되며, 0은 해당 키에 대해서 기본값을 쓴다는 의미입니다. 배속을 조정하는 F3/F4 키는 바꿀 수 없습니다.</p>

<h2>사용법</h2>
<div class="gallery"><img src="/img/angolmois/example.jpg" width="403" height="312" alt="[앙골모아 스크린샷]" /></div>
<p>앙골모아를 실행하면 간단한 인터페이스가 나타납니다. 노트들은 왼쪽에 나타나고 BGA는 오른쪽에 나타납니다. 윗쪽에는 점수가, 아랫쪽에는 순서대로 배속, 현재 BPM, 그리고 전체 재생 길이와 현재 위치가 나타납니다. 플레이 모드일 경우 왼쪽 아래에 빨간 색 게이지도 나타납니다.</p>
<p>플레이 도중에 F3을 누르면 배속이 낮아지고, F4를 누르면 배속이 높아집니다. 배속은 0.1배속부터 99배속까지 가능합니다. Esc 키를 누르면 게임을 곧바로 종료합니다.</p>
<p>판정은 다섯 종류가 있으며, 순서대로 COOL, GREAT, GOOD, BAD, MISS로 표시됩니다. COOL과 GREAT는 콤보 수를 1씩 올리고, GOOD은 콤보 수를 올리지 않으며, BAD는 콤보 수를 0으로 되돌립니다. MISS는 아예 해당 노트를 놓쳤을 때만 나타납니다. 롱노트 판정은 시작과 끝에서 모두 체크하며, 판정 범위는 <abbr title="Bits Per Minute">BPM</abbr>과 관계 없이 완전히 시간 기준으로 정해집니다.</p>
<p>플레이를 완전히 종료해서 프로그램이 자동으로 종료될 때는 콘솔에 다음과 같은 결과 정보가 나타납니다. (윈도의 경우, SDL이 어떻게 컴파일되었느냐에 따라 stdout.txt 파일에 나타나는 경우도 있습니다.)</p>
<pre>
** CLEARED! **
COOL   262    GREAT  538    GOOD   294
BAD    127    MISS    25    MAX COMBO 54
SCORE 0263769 (max 0559928)
</pre>
<p>만약 끝날 때 게이지가 전체의 30% 이상 차 있지 않다면 다음과 같이 간단한 메시지만 뜹니다.</p>
<pre>YOU FAILED!</pre>
