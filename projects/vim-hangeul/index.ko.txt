## vim: syn=mako
<%! title = u'hangeul.vim' %>

<img src="/img/vim-hangeul/demo.png" alt="" class="right" />
**hangeul.vim**은 [vim](http://vim.org/)용 한글 입력 플러그인입니다. 현재의 `+hangul_input` 컴파일 옵션을 대체하려 만들었으며, 다음과 같은 특징을 가지고 있습니다.

* 컴파일 옵션 없이 스크립트 설치(=복사)만으로 이용할 수 있습니다.
* EUC-KR(cp949), UTF-8을 비롯한 여러 로캘에서 수정 없이 쓸 수 있습니다.
* 두벌식, 세벌식 최종, 세벌식 390 자판을 완전하게 지원합니다.
* [libhangul](http://kldp.net/projects/hangul/)의 자료에 기반하여 쓰기 편한 한자 입력을 지원합니다.

hangeul.vim은 vim 7.0 이상을 요구하며, `+autocmd`와 `+iconv` 옵션이 켜져 있어야 합니다. 다른 한글 입력 방법을 꺼야 할 필요는 딱히 없지만, 기반 터미널에서 어떤 형태로든 한글을 제대로 출력해야 합니다. 한자 입력이 필요할 경우에는 별도의 파일을 더 받아야 합니다.


설치
------

먼저 hangeul.vim의 [최신 버전](http://hg.mearie.org/hangeul.vim/raw-file/tip/hangeul.vim)을 받아서 플러그인 디렉토리에 복사합니다. 플러그인 디렉토리는 보통 <`~/.vim/plugin`>에 있으며, 자세한 사항은 <`:h add-global-plugin`>을 참고하십시오.

그리고 vimrc 파일(보통 <`~/.vimrc`>에 있음)에 다음을 추가합니다.

	let hangeul_enabled = 1

이제 vim을 재시작하고, 상태 표시줄에 <`{Eng}`>라는 표시가 나오는 것을 확인합니다. (상태 표시줄이 없다면 넘어 가도 됩니다.) 입력 모드로 들어 가서 한글이 잘 입력되는지 확인해 보십시오. _한영 전환 글쇠는 기본적으로 <`<C-\><Space>`>입니다._

한자 입력을 위해서는 별도의 파일이 더 필요합니다. 먼저 다음 명령으로 libhangul의 한자 데이터베이스 파일을 받으십시오.

	$ svn export svn://kldp.net/svnroot/hangul/libhangul/trunk/data/hanja/hanja.txt

이제 이 파일을 hangeul.vim과 같은 디렉토리에 넣고 vim을 재시작합니다. (설정에 따라 다른 곳에 넣을 수도 있습니다.)


사용
------

hangeul.vim이 재지정하는 글쇠는 다음과 같습니다.

* <`!`>부터 <`~`>까지 94개의 글쇠. (한글 입력을 위해 꼭 필요합니다. EBCDIC는 아직 지원하지 않습니다.)
* 백스페이스와 그에 해당하는 <`<C-H>`> 글쇠.
* 한영 전환 글쇠 <`<C-\><Space>`>와 한자 변환 글쇠 <`<C-\><CR>`>. 사용자가 변경 가능합니다만 이 경우 터미널에 따라 입력 불가능할 수도 있습니다.

한 번에 한글 자판 하나와 영문 자판(쿼티) 하나만 활성화되며, 사용자 설정으로 한글 자판을 고칠 수 있습니다. 활성화된 자판은 (있다면) 상태 표시줄 오른쪽에 표시됩니다. hangeul.vim은 다음 자판을 지원합니다.

* 영문 쿼티(Eng). _외부에서 드보락 등으로 입력이 들어 오면 처리하지 못 합니다!_
* 두벌식 표준(H2s)
* 세벌식 최종(H3f): 모아치기를 지원하며, ㅘ를 <`hf`> 등으로 치는 비 정석 타법도 지원합니다.
* 세벌식 390(H39): 최종과 같으며, 모음을 입력하지 않을 때 <`/`>를 입력하면 슬래시가 입력됩니다. (한/글과 동일)

한글 입력 중 틀린 글자는 백스페이스 등으로 지울 수 있습니다. 현재 입력 중인 글자는 항상 낱자 단위로 지워지며, 입력 중이지 않은 것은 글자 단위로 지워집니다.

사용자의 편의를 위해 입력 모드에서 다른 모드로 들어 갔을 때는 자동으로 영문으로 자판이 바뀌며, 다시 입력 모드로 돌아 가면 이전에 쓰던 자판을 사용합니다. 이는 `hangeul_cmdline` 옵션을 설정하여 명령줄 모드에서도 한글을 입력할 수 있게 해도 마찬가지로 적용됩니다.

한자 입력은 vim의 자동 완성 인터페이스를 통해 이루어집니다. 자동 완성 팝업이 뜨지 않는 환경에서는 <`<C-N>`>과 <`<C-P>`>를 눌러 한자를 선택할 수 있으며, 뜨는 환경에서는 한자의 뜻과 음을 보면서 선택할 수 있습니다.


설정
------

hangeul.vim의 설정은 주로 vimrc 파일을 수정하여 이루어집니다. 다음 변수들은 특별한 의미를 가집니다:

`hangeul_default_mode` (기본값 <`'2s'`>)
:	기본적으로 사용할 한글 자판을 나타냅니다. 실행 중간에도 변수를 바꾸면 다음 자판 변경시 적용됩니다. 사용할 수 있는 값으로는 두벌식(<`'2s'`>), 세벌식 최종(<`'3f'`>), 세벌식 390(<`'39'`>)이 있습니다.
`hangeul_cmdline`
:	이 변수가 존재하면 입력 모드 뿐만 아니라 명령줄 모드와 검색줄에서도 한글 입력이 가능합니다. 지원이 완전치 않으며, 일부 알려진 버그가 있으므로 유의하십시오.
`hangeul_hanja_path`
:	hanja.txt 파일을 찾을 경로를 지정합니다. `runtimepath` 옵션과 같은 문법을 사용하며, 기본값은 `runtimepath`와 같으나 plugin 디렉토리를 추가적으로 찾습니다. 한자 데이터베이스는 오직 vim이 처음 시작했을 때만 불러 옵니다.
`hangeul_hanja_desc_limit` (기본값 1)
:	한자의 뜻과 음을 얼마나 보여 줄 지를 결정합니다. 0보다 크면 그만큼의 갯수를 보여 주고 나머지는 ...로 생략하며, 0이면 보여 주지 않고, 0보다 작으면 모두 보여 줍니다. 각 뜻과 음은 쉼표로 구분되어 있다고 가정합니다.

다음 명령을 vimrc에 추가하면 한영 전환 글쇠와 한자 변환 글쇠를 바꿀 수 있습니다. 사용자가 글쇠를 새로 지정하면 기본 글쇠는 사용되지 않습니다.

	imap <silent> (한자변환글쇠) <Plug>HanConvert
	imap <silent> (한영전환글쇠) <Plug>HanMode


알려진 문제점
---------------

* 겹자음이나 겹모음은 입력 중이더라도 한 번에 지워집니다.
* 명령줄 모드에서의 동작이 전체적으로 완전하지 않습니다. 특히 커서의 이동을 감지하기 위한 방법이 부족하여 구현이 힘들 듯 합니다.
* 한자 데이터베이스를 불러 오는 데 오랜 시간이 걸립니다. 이 문제는 vim의 스크립트 수행 속도와 연관이 있으며, hanja.txt에서 불필요한 단어 항목을 모두 지워서 다소 완화시킬 수 있습니다.
* 사용자의 편의를 위해 한자 데이터베이스를 자동으로 받아 오는 기능이 필요합니다.


라이선스
----------

hangeul.vim은 [강 성훈](/)이 만들었으며, 현재는 [GNU GPL 2 또는 그 이후의 버전](http://www.gnu.org/licenses/old-licenses/gpl-2.0.html)에 따라 사용할 수 있습니다. 다만 필요할 경우 라이선스를 제약이 덜한 것으로 바꿀 수도 있습니다.

